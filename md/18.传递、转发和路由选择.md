# 传递、转发和路由选择

>传递( Delivery )，在网络层控制下，用底层的网络对一个分组进行处理。
>
>转发( Forwarding) ，一个分组传递到下一站点的方法。
>
>路由选择（Routing)，在转发过程中创建路由表的方法。



## 传递

网络层负责用底层物理网络处理分组，我们定义这种处理为分组的传递。

### 直接传递和间接传递

![image-20250102112513758](assets/image-20250102112513758.png)

## 转发

转发是指将分组路由到它的目的端。

转发要求主机或路由器有一个路由表。

当主机有分组要发送时，或路由器已收到一个分组要转发时，就要查找路由表以便求得到达最终目的端的路由。

![image-20250102112805167](assets/image-20250102112805167.png)

![image-20250102113005120](assets/image-20250102113005120.png)

![image-20250102113211335](assets/image-20250102113211335.png)

![image-20250102113238373](assets/image-20250102113238373.png)

![image-20250102113247205](assets/image-20250102113247205.png)

![image-20250102113313221](assets/image-20250102113313221.png)

![image-20250102113315780](assets/image-20250102113315780.png)

![image-20250102113519861](assets/image-20250102113519861.png)

![image-20250102113523037](assets/image-20250102113523037.png)

![image-20250102113526580](assets/image-20250102113526580.png)

![image-20250102113554518](assets/image-20250102113554518.png)

![image-20250102113556950](assets/image-20250102113556950.png)

![image-20250102113559196](assets/image-20250102113559196.png)

![image-20250102113632451](assets/image-20250102113632451.png)

![image-20250102113635715](assets/image-20250102113635715.png)

## 单播路由选择协议

![image-20250102114033521](assets/image-20250102114033521.png)

### 自治系统AS

![image-20250102114040307](assets/image-20250102114040307.png)

![image-20250102114328706](assets/image-20250102114328706.png)

### 距离向量路由选择表

![image-20250102114334521](assets/image-20250102114334521.png)

![image-20250102114449624](assets/image-20250102114449624.png)

![image-20250102114513041](assets/image-20250102114513041.png)

坏消息传递慢

![image-20250102114517130](assets/image-20250102114517130.png)

![image-20250102114620795](assets/image-20250102114620795.png)

### RIP协议

用跳数来衡量距离

![image-20250102114649322](assets/image-20250102114649322.png)

使用广播UDP报文来交换路由信息！

最大距离为15跳，16跳就视为不可达

![image-20250102114657689](assets/image-20250102114657689.png)

![image-20250102114909411](assets/image-20250102114909411.png)

### 链路状态路由选择（最短路径优先协议）

基于Dijkstra最短路径优先（SPF）算法

![image-20250102114912290](assets/image-20250102114912290.png)

![image-20250102115021418](assets/image-20250102115021418.png)

![image-20250102115116451](assets/image-20250102115116451.png)

![image-20250102115140464](assets/image-20250102115140464.png)

![image-20250102115147745](assets/image-20250102115147745.png)

![image-20250102115157327](assets/image-20250102115157327.png)

![image-20250102115245096](assets/image-20250102115245096.png)

![image-20250102115414305](assets/image-20250102115414305.png)

### 链路类型

![image-20250102115418622](assets/image-20250102115418622.png)

![image-20250102115425194](assets/image-20250102115425194.png)

![image-20250102115456245](assets/image-20250102115456245.png)

![image-20250102115503207](assets/image-20250102115503207.png)

![image-20250102115518311](assets/image-20250102115518311.png)

![image-20250102115525066](assets/image-20250102115525066.png)

![image-20250102115544063](assets/image-20250102115544063.png)

![image-20250102115908713](assets/image-20250102115908713.png)

![image-20250102115914068](assets/image-20250102115914068.png)

![image-20250102120251121](assets/image-20250102120251121.png)

![image-20250102120844248](assets/image-20250102120844248.png)

![image-20250102120850308](assets/image-20250102120850308.png)

![image-20250102120853343](assets/image-20250102120853343.png)

![image-20250102120900308](assets/image-20250102120900308.png)

![image-20250102120905911](assets/image-20250102120905911.png)

![image-20250102120919176](assets/image-20250102120919176.png)

![image-20250102120926981](assets/image-20250102120926981.png)

### RIP

![image-20250102121004782](assets/image-20250102121004782.png)

![image-20250102121009741](assets/image-20250102121009741.png)

![image-20250102121012755](assets/image-20250102121012755.png)

![image-20250102121016516](assets/image-20250102121016516.png)

![image-20250102121019176](assets/image-20250102121019176.png)

![image-20250102121022095](assets/image-20250102121022095.png)

![image-20250102121025005](assets/image-20250102121025005.png)

![image-20250102121027741](assets/image-20250102121027741.png)

![image-20250102121130822](assets/image-20250102121130822.png)



![image-20250102121111877](assets/image-20250102121111877.png)

![image-20250102121138045](assets/image-20250102121138045.png)

### RIP报文

![image-20250102121153797](assets/image-20250102121153797.png)

![image-20250102121343286](assets/image-20250102121343286.png)

坏消息传播慢

![image-20250102121346735](assets/image-20250102121346735.png)

![image-20250102121407178](assets/image-20250102121407178.png)

### OSPF

open-SPF

使用dijkstra最短路径算法SPF

![image-20250102121410726](assets/image-20250102121410726.png)

![image-20250102121504493](assets/image-20250102121504493.png)

![image-20250102121509595](assets/image-20250102121509595.png)

![image-20250102121512713](assets/image-20250102121512713.png)

![image-20250102121530052](assets/image-20250102121530052.png)

![image-20250102121535086](assets/image-20250102121535086.png)

![image-20250102121656300](assets/image-20250102121656300.png)

![image-20250102121709467](assets/image-20250102121709467.png)

### OSPF报文

![image-20250102121721463](assets/image-20250102121721463.png)

![image-20250102134127752](assets/image-20250102134127752.png)

![image-20250102134137003](assets/image-20250102134137003.png)

![image-20250102134154970](assets/image-20250102134154970.png)

![image-20250102134158881](assets/image-20250102134158881.png)

![image-20250102134208213](assets/image-20250102134208213.png)

![image-20250102134719009](assets/image-20250102134719009.png)

![image-20250102134722227](assets/image-20250102134722227.png)

![image-20250102134726306](assets/image-20250102134726306.png)

### 外部网关协议BGP

![image-20250102134742511](assets/image-20250102134742511.png)

![image-20250102134746880](assets/image-20250102134746880.png)

![image-20250102134752634](assets/image-20250102134752634.png)

![image-20250102134756211](assets/image-20250102134756211.png)

![image-20250102134801706](assets/image-20250102134801706.png)

![image-20250102134804855](assets/image-20250102134804855.png)

![image-20250102134817686](assets/image-20250102134817686.png)

![image-20250102134826264](assets/image-20250102134826264.png)

![image-20250102134828779](assets/image-20250102134828779.png)

![image-20250102134839050](assets/image-20250102134839050.png)

![image-20250102134845522](assets/image-20250102134845522.png)

### BGP报文

![image-20250102134847983](assets/image-20250102134847983.png)

## 多播路由选择协议

![image-20250102134915800](assets/image-20250102134915800.png)

![image-20250102134923102](assets/image-20250102134923102.png)

![image-20250102134925944](assets/image-20250102134925944.png)

![image-20250102134932961](assets/image-20250102134932961.png)

![image-20250102134936431](assets/image-20250102134936431.png)

![image-20250102134947353](assets/image-20250102134947353.png)

![image-20250102134959827](assets/image-20250102134959827.png)

![image-20250102135003807](assets/image-20250102135003807.png)

![image-20250102135011223](assets/image-20250102135011223.png)

![image-20250102135014192](assets/image-20250102135014192.png)

![image-20250102135022055](assets/image-20250102135022055.png)

![image-20250102135026881](assets/image-20250102135026881.png)

![image-20250102135039417](assets/image-20250102135039417.png)

![image-20250102135042480](assets/image-20250102135042480.png)

![image-20250102135048447](assets/image-20250102135048447.png)

![image-20250102135054045](assets/image-20250102135054045.png)

![image-20250102135059554](assets/image-20250102135059554.png)

![image-20250102135112573](assets/image-20250102135112573.png)

![image-20250102135116055](assets/image-20250102135116055.png)

![image-20250102135124287](assets/image-20250102135124287.png)

![image-20250102135127069](assets/image-20250102135127069.png)

![image-20250102135129878](assets/image-20250102135129878.png)

![image-20250102135132143](assets/image-20250102135132143.png)

![image-20250102135143127](assets/image-20250102135143127.png)

![image-20250102135146855](assets/image-20250102135146855.png)

![image-20250102135153265](assets/image-20250102135153265.png)

![image-20250102135156268](assets/image-20250102135156268.png)

![image-20250102135158790](assets/image-20250102135158790.png)

![image-20250102135212024](assets/image-20250102135212024.png)

![image-20250102135218551](assets/image-20250102135218551.png)

![image-20250102135230840](assets/image-20250102135230840.png)

![image-20250102135237415](assets/image-20250102135237415.png)

![image-20250102135244815](assets/image-20250102135244815.png)

![image-20250102135248235](assets/image-20250102135248235.png)

![image-20250102135252782](assets/image-20250102135252782.png)