# 交换

交换网络：由一系列互联的节点（交换机）构成，能够在链接到交换机的设备之间建立临时连接。

![image-20241221103731979](assets/image-20241221103731979.png)

![image-20241221103746028](assets/image-20241221103746028.png)

![image-20241221103852006](assets/image-20241221103852006.png)

![image-20241221103907108](assets/image-20241221103907108.png)

![image-20241221103951870](assets/image-20241221103951870.png)

## 电路交换网络

![image-20241221104052178](assets/image-20241221104052178.png)

![image-20241221104139648](assets/image-20241221104139648.png)

三个阶段：

1. 建立阶段（setup phase）
2. 数据传输（data transfer）
3. 拆除阶段（teardown phase）

![image-20241221104154479](assets/image-20241221104154479.png)

电路交换必须预留资源：

![image-20241221104312560](assets/image-20241221104312560.png)

![image-20241221104802058](assets/image-20241221104802058.png)

在传统电话网的物理层采用电路交换方法。

常使用7号信令系统（SS7）建立连接盒撤销连接。

## 数据报网络

![image-20241221104949824](assets/image-20241221104949824.png)

在分组交换网中，不存在资源预留，资源按需分配。

![image-20241221105051391](assets/image-20241221105051391.png)

**![image-20241221105110415](assets/image-20241221105110415.png)**

（后续会有相关静态路由与动态路由RIP相关等路由表建立方式）

![image-20241221105220086](assets/image-20241221105220086.png)

假设数据报网传输过程中经过3跳情况下的延迟计算：

![image-20241221105230602](assets/image-20241221105230602.png)

**因特网**在**网络层**用数据报方法对分组进行交换。

## 虚电路网络

![image-20241221105440086](assets/image-20241221105440086.png)

![image-20241221105447052](assets/image-20241221105447052.png)

注意：虚电路网络通常在数据链路层实现，电路交换网在物理层实现，数据报网络在网络层实现

![image-20241221105611995](assets/image-20241221105611995.png)

虚电路的数据报中不包含端到端的地址信息，只包含当前虚电路标识符，然后根据交换机中建立阶段生成的虚电路标识符交换表前往下一条并更新数据报中的虚电路标识符VCI

![image-20241221105928411](assets/image-20241221105928411.png)

![image-20241221110002841](assets/image-20241221110002841.png)

![image-20241221110230995](assets/image-20241221110230995.png)

![image-20241221110342002](assets/image-20241221110342002.png)

![image-20241221110410529](assets/image-20241221110410529.png)

![image-20241221110450311](assets/image-20241221110450311.png)

![image-20241221110503906](assets/image-20241221110503906.png)

在交换**广域网**中，**数据链路层**通常采用虚电路技术实现

## 广域网

![image-20241221112209329](assets/image-20241221112209329.png)

![image-20241221112214724](assets/image-20241221112214724.png)

![image-20241221112246261](assets/image-20241221112246261.png)

注意：数据报交换无连接，虚电路交互有连接（即建立连接的过程）

![image-20241221112434112](assets/image-20241221112434112.png)

### 数据报服务是不可靠的服务：

可靠通信由软件实现（TCP）

![image-20241221112527187](assets/image-20241221112527187.png)

![image-20241221112536114](assets/image-20241221112536114.png)

![image-20241221112540072](assets/image-20241221112540072.png)

![image-20241221112543633](assets/image-20241221112543633.png)

![image-20241221112547345](assets/image-20241221112547345.png)

#### 虚电路服务相对拥有较好的服务质量（QoS）：

![image-20241221112658441](assets/image-20241221112658441.png)

![image-20241221112701184](assets/image-20241221112701184.png)

![image-20241221112705585](assets/image-20241221112705585.png)

![image-20241221112711691](assets/image-20241221112711691.png)

![image-20241221112729785](assets/image-20241221112729785.png)

让网络只提供数据报服务可以大大简化网络层的结构。

并且因特网的发展也充分说明了在网络层提供数据报服务是非常成功的。（迅速且经济）

此外，数据报服务还很适合用于多播与广播

## 交换机结构

![image-20241221114218133](assets/image-20241221114218133.png)

![image-20241221114222076](assets/image-20241221114222076.png)

![image-20241221114225750](assets/image-20241221114225750.png)

![image-20241221114956805](assets/image-20241221114956805.png)

![image-20241221115054196](assets/image-20241221115054196.png)

![image-20241221115101237](assets/image-20241221115101237.png)

![image-20241221115145389](assets/image-20241221115145389.png)

![image-20241221115150871](assets/image-20241221115150871.png)

![image-20241221115225318](assets/image-20241221115225318.png)

![image-20241221115154108](assets/image-20241221115154108.png)

![image-20241221115240144](assets/image-20241221115240144.png)

![image-20241221115307040](assets/image-20241221115307040.png)