# 无线局域网

由IEEE定义的无线局域网规范称为IEEE802.11，该规范涵盖了物理层和数据链路层。

![image-20241226105037914](assets/image-20241226105037914.png)

![image-20241226105049949](assets/image-20241226105049949.png)

BSS：基本服务集（无线局域网的积木块）

AP：接入点（中央基站）

![image-20241226105053288](assets/image-20241226105053288.png)

![image-20241226105318462](assets/image-20241226105318462.png)

![image-20241226111301582](assets/image-20241226111301582.png)

![image-20241226111343241](assets/image-20241226111343241.png)

![image-20241226111356765](assets/image-20241226111356765.png)

![image-20241226111617007](assets/image-20241226111617007.png)

![image-20241226111628798](assets/image-20241226111628798.png)

![image-20241226111640125](assets/image-20241226111640125.png)

![image-20241226111650442](assets/image-20241226111650442.png)

![image-20241226111659935](assets/image-20241226111659935.png)

![image-20241226111705360](assets/image-20241226111705360.png)

![image-20241226111913891](assets/image-20241226111913891.png)

## IEEE802.11标准中的MAC层

![image-20241226111920016](assets/image-20241226111920016.png)

![image-20241226113443700](assets/image-20241226113443700.png)

![image-20241226113446196](assets/image-20241226113446196.png)

![image-20241226113630194](assets/image-20241226113630194.png)

![image-20241226113651036](assets/image-20241226113651036.png)

![image-20241226113738388](assets/image-20241226113738388.png)

802.11的MAC层在物理层之上包括两个子层：

![image-20241226113820740](assets/image-20241226113820740.png)

![image-20241226113824148](assets/image-20241226113824148.png)

![image-20241226113958435](assets/image-20241226113958435.png)

![image-20241226114010052](assets/image-20241226114010052.png)

![image-20241226114130794](assets/image-20241226114130794.png)

![image-20241226114240036](assets/image-20241226114240036.png)

## MAC帧格式

![image-20241226114522338](assets/image-20241226114522338.png)

1. FC：帧控制。定义了帧的类型和一些控制信息。2字节。内容包括：协议版本、类型、子类型、To DS、From DS、更多标记、重传（置1表示为重传帧）、Pwr mgt、更多数据、WEP、Rsvd
2. D：2字节。在一个控制帧中，这个字段用来定义帧的ID；其他类型的帧中，这个字段用来定义用于设置NAV值的传输间隔时间。
3. Address地址：四个地址，每个占6字节。每一个地址字段的含义取决于To DS和From DS子字段的值
4. SC序列控制：2字节。定义帧的序列号，以用于流量控制
5. Frame Body帧主体：长度可以在0~2312字节之间。包含了根据FC字段中定义的类型和子类型的信息。
6. FCS：4字节。CRC-32差错检测序列。

![image-20241226114527642](assets/image-20241226114527642.png)

![image-20241226114550857](assets/image-20241226114550857.png)

![image-20241226114609993](assets/image-20241226114609993.png)

From DS和To DS 这两个字段反映了是否来自或是发送到分布式系统。为0表示不是分布式系统。

根据这两个字段会改变四个地址字段的值。

![image-20241226114615363](assets/image-20241226114615363.png)

**总结：地址1总是下一个设备的地址，而地址2总是前一个设备的地址。如果最后的目的站点没有被地址1定义的话，地址3就是最后目的站点的地址。如果起始源站点的地址与地址2不同的话，那么地址4就是起始源站点的地址。如果都来源于同一个BSS，那么地址3字段写入所在BSS的ID。**

## 站点隐藏与暴露问题

![image-20241226120457749](assets/image-20241226120457749.png)

![image-20241226150322106](assets/image-20241226150322106.png)

![image-20241226150336594](assets/image-20241226150336594.png)

![image-20241226150356433](assets/image-20241226150356433.png)

![image-20241226150411237](assets/image-20241226150411237.png)

![image-20241226150423196](assets/image-20241226150423196.png)

![image-20241226150437208](assets/image-20241226150437208.png)

![image-20241226150550530](assets/image-20241226150550530.png)

![image-20241226150553083](assets/image-20241226150553083.png)

![image-20241226150555329](assets/image-20241226150555329.png)

![image-20241226150610057](assets/image-20241226150610057.png)

![image-20241226150612967](assets/image-20241226150612967.png)

![image-20241226150615711](assets/image-20241226150615711.png)